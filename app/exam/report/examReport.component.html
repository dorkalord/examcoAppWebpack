<h1>Exam report: {{currentExam.course.code}} {{currentExam.date | date:'dd.mm.yyyy'}} </h1>

<div class="container panel" style="background-color: lavender">
	<h2>Student: {{this.currentAttempt.student.name}} </h2>

	<p>
		Total {{currentAttempt.total}}
		<br/> Final total {{currentAttempt.finalTotal | number : '1.2-2'}} %
		<br/>
	</p>

	<div class="container panel" *ngFor="let anws of currentAttempt.anwsers; let i=index">
		<h3>Q{{i+1}} {{anws.question.text}}</h3>
		<p>Points: {{ anws.total - anws.adjustment}} + {{anws.adjustment}} = {{anws.total}} out of {{anws.question.max}} => {{anws.finalTotal
			| number : '1.2-2'}} % </p>
		<p>Note: {{anws.note}} </p>

		<table class="table table-hover table-striped">
			<thead>
				<tr>
					<th>Mistake</th>
					<th>Impact</th>
					<th>Advice</th>
				</tr>
			</thead>
			<tbody>
				<tr *ngFor="let mistake of anws.mistakes; let j=index">
					<td> {{mistake.argument.text}} </td>
					<td> {{mistake.adjustedWeight}} </td>
					<td> {{mistake.argument.advice}} </td>
				</tr>
			</tbody>
		</table>

	</div>

	<div class="container panel">
		<h3>Exam critera performance</h3>
		<table class="table table-hover table-striped">
			<thead>
				<tr>
					<th>Criterea</th>
					<th>Deductions</th>
					<th>Grade</th>
					<th>Advice</th>
				</tr>
			</thead>
			<tbody>
				<tr *ngFor="let advice of currentAttempt.examAdvices; let j=index">
					<td> {{advice.examCriterea.name}} </td>
					<td> {{advice.total}} </td>
					<td> {{advice.advice.grade}} </td>
					<td> {{advice.advice.text}} </td>
				</tr>
			</tbody>

			
		</table>
		<div class="container row">
				<div style="display: block">
					<canvas baseChart [(datasets)]="gradeChart.chartData" [labels]="gradeChart.chartLabels" [options]="gradeChart.chartOptions"
					 [legend]="gradeChart.chartLegend" [chartType]="gradeChart.chartType">
					</canvas>
				</div>
			</div>
	</div>
</div>

<div class="container">
	<ul class="pagination">
		<li [ngClass]="(currentAttemptIndex>0)?'active':'disabled'" *ngIf="currentAttemptIndex>0">
			<a (click)="moveTo(currentAttemptIndex-1)">Previous</a>
		</li>
		<li *ngFor="let attempt of examReportDTS.examAttempts; let i=index" [ngClass]="(currentAttemptIndex===i)?'active':''">
			<a (click)="moveTo(i)">{{i+1}}</a>
		</li>
		<li [ngClass]="(currentAttemptIndex<examReportDTS.examAttempts.length-1)?'active':'disabled'" *ngIf="currentAttemptIndex<examReportDTS.examAttempts.length-1">
			<a (click)="moveTo(currentAttemptIndex+1)">Next</a>
		</li>
	</ul>
</div>

<div class="margin-20">
	<pre>form value: <br>{{	allExamAdvices | json}}</pre>
</div>